---
title: 链表
description: 本篇文章将介绍：ListNode、List的结构以及存储字段的解释
categories:
 - Redis
---

> 世界以痛吻我，我仍报之以歌。

## ListNode

每个链表节点使用一个adlist.h/listNode结构来表示：
```
typedef struct listNode{
    // 前置节点
    struct listNode * prev;
    // 后置节点
    struct listNode * next;
    // 节点的值
    void * value;
}listNode;
```

## List

虽然仅仅使用多个listNode结构就可以组成链表，但使用adlist.h/list来持有链表的话，操作起来会更方便：
```
typedef struct list{
    // 表头节点
    listNode * head;
    // 表尾节点
    listNode * tail;
    // 链表所包含的节点数量
    unsigned long len;
    // 节点值复制函数
    void *(*dup)(void * ptr);
    // 节点值释放函数
    void (*free)(void * ptr);
    // 节点值对比函数
    int (*match)(void *ptr,void *key);
}list;
```
list结构为链表提供了表头指针head、表尾指针tail，以及链表长度计数器len，而dup、free和match成员则是用于实现多态链表所需的类型特定函数：

- dup函数用于复制链表节点所保存的值；
- free函数用于释放链表节点所保存的值；
- match函数则用于对比链表节点所保存的值和另一个输入值是否相等。